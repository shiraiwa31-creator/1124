<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QUIZ</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
     <div class="game-card">
    <h1 class="title" id="title">é–“é•ã„æ¢ã—</h1>

    <div class="info">
        åŒã˜é¡”ãŒä¸¦ã¶ä¸­ã«ã€1ã¤ã ã‘é•ã†é¡”ãŒã‚ã‚‹ã‚ˆã€‚<br>
        10ç§’ä»¥å†…ã«ã§ãã‚‹ã ã‘ãŸãã•ã‚“å½“ã¦ã¦ã­ï¼
    </div>

    <div class="status">
        ã‚¯ãƒªã‚¢<span id="clear">0</span>å›
        æ™‚é–“<span id="sec">10</span>ç§’
    </div>

    <ul class="list">
        <li class="cell1">â˜ºï¸</li>
        <li class="cell2">â˜ºï¸</li>
        <li class="cell3">â˜ºï¸</li>
        <li class="cell4">â˜ºï¸</li>
        <li class="cell5">â˜ºï¸</li>
        <li class="cell6">â˜ºï¸</li>
        <li class="cell7">â˜ºï¸</li>
        <li class="cell8">â˜ºï¸</li>
        <li class="cell9">â˜ºï¸</li>
    </ul>

    <button id="start">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
    </div>
    <script>
    $(function () {
        let clear = 0;             
        let timeLeft = 10;   
        let timerId = null;
        let playing = false;      
        const $clear = $("#clear");
        const $sec   = $("#sec");
        const $list  = $(".list");
        const $start = $("#start");

        let r = 0; 

        // ç”»é¢ã‚’æºã‚‰ã™
        function shakeScreen() {
            $("body").addClass("shake");
            setTimeout(function () {
                $("body").removeClass("shake");
            }, 300);
        }

        // ãƒ©ãƒ³ãƒ€ãƒ ã«1ã¤ã ã‘ ğŸ˜‰ ã‚’å‡ºã™ã‚’å®šç¾©ã™ã‚‹
        function setRandomFace() {
            $list.find("li").text("â˜ºï¸");
            r = Math.floor(Math.random() * 9) + 1;
            $(".cell" + r).text("ğŸ˜‰");
        }

        setRandomFace();
        $list.on("click", "li", function () {
            if (!playing) return; // ã‚¿ã‚¤ãƒ çµ‚äº†å¾Œã¯ç„¡åŠ¹
            const index = $(this).index() + 1;
            if (index === r) {
                clear++;
                $clear.text(clear);
                setRandomFace();

            } else {
                shakeScreen();
            }
        });

        $start.on("click", function () {
        clear = 0;
        timeLeft = 10;
        $clear.text(clear);
        $sec.text(timeLeft);
        playing = true;

            setRandomFace();

        timerId = setInterval(function () {
        timeLeft--;
        $sec.text(timeLeft);

        if (timeLeft <= 0) {
                endGame();}
        }, 1000);

        });

        
             // ã‚²ãƒ¼ãƒ çµ‚äº†
        function endGame() {
            playing = false;
            if (timerId !== null) {
                clearInterval(timerId);
                timerId = null;
            }
            alert(`ãŠã‚ã§ã¨ã†ï¼${clear}å›é”æˆï¼`);
        }

    });
    </script>
</body>
</html>